FROM kernsuite/base:5
RUN docker-apt-install libboost-python-dev python3-pip
RUN docker-apt-install libcfitsio-dev wcslib-dev
RUN docker-apt-install casacore-dev

# Setup a vritual env
ENV VIRTUAL_ENV=/opt/venv
RUN docker-apt-install python3-virtualenv
RUN python3 -m virtualenv --python=/usr/bin/python3 $VIRTUAL_ENV
ENV PATH="$VIRTUAL_ENV/bin:$PATH"

ADD . /code
RUN pip3 install /code
WORKDIR /code
ENV USER=root
